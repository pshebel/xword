(()=>{"use strict";var e,s={15:(e,s,t)=>{var o=t(540),n=t(338),r=t(848);const a=({size:e,index:s,inFocus:t,isFocus:o,value:n,onChange:a,onClick:i,inputRef:c})=>{let l="square";return o?l+=" is-focus":t&&(l+=" in-focus"),0===s?l+=" top-left":s===e-1?l+=" top-right":s===e*(e-1)?l+=" bottom-left":s===e*e-1&&(l+=" bottom-right"),(0,r.jsx)("input",{ref:c,className:l,maxLength:1,value:n||"",onClick:e=>i(s,e),onChange:()=>{},onKeyDown:e=>a(s,e)})},i=({size:e,squares:s,onChange:t})=>{const n=(0,o.useRef)([]),[i,c]=(0,o.useState)(0),[l,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{n.current[0]&&(n.current[0].focus(),c(0))},[e]);const d=e=>{console.log("move to ",e),n.current[e]?.focus(),c(e)},h=s=>{if(console.log("move forward"),s!==e*e-1)if(l)d(s+1);else{const t=Math.floor(s/e),o=s-t*e;d(t<e-1?(t+1)*e+o:o+1)}},f=(o,n)=>{if(console.log(n),"Backspace"===n.key&&(""===s[o]?(s=>{if(console.log("move back"),0!==s)if(l)d(s-1);else{const t=Math.floor(s/e),o=s-t*e;d(t>0?(t-1)*e+o:(e-1)*e+o-1)}})(o):t(o,"")),"Tab"===n.key&&(n.preventDefault(),h(o)),RegExp(/^\p{L}$/,"u").test(n.key)){const e=n.key.toUpperCase();t(o,e),h(o)}},x=(e,s)=>{console.log(s),console.log("switching ",l),e===i?u(!l):c(e)},v=t=>{const o=l?Math.floor(i/e)===Math.floor(t/e):i%e===t%e;return(0,r.jsx)(a,{size:e,index:t,inFocus:o,isFocus:t===i,value:s[t],onChange:f,onClick:x,inputRef:e=>n.current[t]=e},t)},g=s=>{const t=[];for(let o=0;o<e;o++){const n=s*e+o;t.push(v(n))}return(0,r.jsx)("div",{className:"board-row",children:t},s)},j=[];for(let s=0;s<e;s++)j.push(g(s));return(0,r.jsx)("div",{className:"board",children:j})};function c({size:e,squares:s,onChange:t}){return(0,r.jsx)(i,{size:e,squares:s,onChange:t})}const l=({children:e,show:s=!0,duration:t=3e3})=>{const[n,a]=(0,o.useState)(s);return(0,o.useEffect)(()=>{if(s&&t>0){const e=setTimeout(()=>{a(!1)},t);return()=>clearTimeout(e)}},[s,t]),n?(0,r.jsx)("div",{className:"alert",children:e}):null},u=({title:e,clues:s})=>{const t=[...s].sort((e,s)=>e.id-s.id);return(0,r.jsxs)("div",{className:"clue-section",children:[(0,r.jsx)("h3",{children:e}),(0,r.jsx)("ol",{children:t.map(e=>(0,r.jsx)("li",{children:e.text},e.id))})]})};function d({data:e,success:s,onCheck:t,onReset:o,showMessage:n,messageVariant:a,messageText:i}){return(0,r.jsxs)("div",{className:"game-info",children:[n&&(0,r.jsx)(l,{variant:a,children:i}),!s&&e.across&&e.down&&(0,r.jsxs)("div",{className:"clues-container",children:[(0,r.jsx)(u,{title:"Across",clues:e.across}),(0,r.jsx)(u,{title:"Down",clues:e.down})]}),(0,r.jsx)("div",{className:"controls",children:s?(0,r.jsx)("button",{onClick:o,children:"Next Puzzle"}):(0,r.jsx)("button",{onClick:t,children:"Check Answer"})})]})}function h(){const[e,s]=(0,o.useState)({id:0,size:3,across:[],down:[],hash:""}),[t,n]=(0,o.useState)(!0),[a,i]=(0,o.useState)(null),[l,u]=(0,o.useState)([]),[h,f]=(0,o.useState)(!1),[x,v]=(0,o.useState)(!1),[g,j]=(0,o.useState)("info"),[m,p]=(0,o.useState)("");(0,o.useEffect)(()=>{e.size>0&&u(Array(e.size*e.size).fill(""))},[e.size]);const w=async()=>{n(!0),i(null);try{const e=await fetch("https://example.com/api/puzzle");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();s(t)}catch(e){i(e.message),z("error","Failed to load puzzle. Please try again.")}finally{n(!1)}},z=(e,s)=>{j(e),p(s),v(!0),setTimeout(()=>{v(!1)},3e3)};return(0,o.useEffect)(()=>{w()},[]),t?(0,r.jsx)("div",{children:(0,r.jsx)("div",{children:"Loading puzzle..."})}):a?(0,r.jsx)("div",{children:(0,r.jsxs)("div",{children:["Error: ",a,(0,r.jsx)("button",{onClick:w,children:"Retry"})]})}):(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"board-container",children:[(0,r.jsx)("div",{className:"game",children:(0,r.jsx)(c,{size:e.size,squares:l,onChange:(e,s)=>{const t=[...l];t[e]=s,u(t)}})}),(0,r.jsx)("div",{className:"info",children:(0,r.jsx)(d,{data:e,success:h,onCheck:()=>{const s=l.join("").toLowerCase(),t=btoa(s);console.log(t,e.hash),t===e.hash?(f(!0),z("success","Congratulations! You solved the puzzle!")):z("error","Not quite right. Keep trying!")},onReset:()=>{f(!1),u([]),v(!1),w()},showMessage:x,messageVariant:g,messageText:m})})]})})}(0,n.createRoot)(document.getElementById("root")).render((0,r.jsx)(o.StrictMode,{children:(0,r.jsx)(h,{})}))}},t={};function o(e){var n=t[e];if(void 0!==n)return n.exports;var r=t[e]={exports:{}};return s[e](r,r.exports,o),r.exports}o.m=s,e=[],o.O=(s,t,n,r)=>{if(!t){var a=1/0;for(u=0;u<e.length;u++){t=e[u][0],n=e[u][1],r=e[u][2];for(var i=!0,c=0;c<t.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every(e=>o.O[e](t[c]))?t.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(u--,1);var l=n();void 0!==l&&(s=l)}}return s}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,n,r]},o.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={792:0};o.O.j=s=>0===e[s];var s=(s,t)=>{var n,r,a=t[0],i=t[1],c=t[2],l=0;if(a.some(s=>0!==e[s])){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(c)var u=c(o)}for(s&&s(t);l<a.length;l++)r=a[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},t=self.webpackChunkxword_io=self.webpackChunkxword_io||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var n=o.O(void 0,[179],()=>o(15));n=o.O(n)})();